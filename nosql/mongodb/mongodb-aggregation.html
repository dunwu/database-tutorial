<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MongoDB èšåˆæ“ä½œ | DB-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/db-tutorial/favicon.ico">
    <meta name="description" content="æ•°æ®åº“æ•™ç¨‹">
    
    <link rel="preload" href="/db-tutorial/assets/css/0.styles.23083d05.css" as="style"><link rel="preload" href="/db-tutorial/assets/js/app.79266cfb.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/4.26b0a8d7.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/30.23b2927a.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/5.1e6b02f3.js" as="script"><link rel="prefetch" href="/db-tutorial/assets/js/10.e898170f.js"><link rel="prefetch" href="/db-tutorial/assets/js/11.632c95d5.js"><link rel="prefetch" href="/db-tutorial/assets/js/12.460e4723.js"><link rel="prefetch" href="/db-tutorial/assets/js/13.02572243.js"><link rel="prefetch" href="/db-tutorial/assets/js/14.c6190d41.js"><link rel="prefetch" href="/db-tutorial/assets/js/15.a381db4a.js"><link rel="prefetch" href="/db-tutorial/assets/js/16.88f06b5b.js"><link rel="prefetch" href="/db-tutorial/assets/js/17.8baa2e66.js"><link rel="prefetch" href="/db-tutorial/assets/js/18.ee71ad12.js"><link rel="prefetch" href="/db-tutorial/assets/js/19.2462d2be.js"><link rel="prefetch" href="/db-tutorial/assets/js/20.a06d0360.js"><link rel="prefetch" href="/db-tutorial/assets/js/21.3ac751e1.js"><link rel="prefetch" href="/db-tutorial/assets/js/22.1f1b2c8a.js"><link rel="prefetch" href="/db-tutorial/assets/js/23.2cf83d37.js"><link rel="prefetch" href="/db-tutorial/assets/js/24.fe279a90.js"><link rel="prefetch" href="/db-tutorial/assets/js/25.a5d7cfb6.js"><link rel="prefetch" href="/db-tutorial/assets/js/26.25a48ed2.js"><link rel="prefetch" href="/db-tutorial/assets/js/27.c589035a.js"><link rel="prefetch" href="/db-tutorial/assets/js/28.7a2cd641.js"><link rel="prefetch" href="/db-tutorial/assets/js/29.6f930670.js"><link rel="prefetch" href="/db-tutorial/assets/js/31.31a1f172.js"><link rel="prefetch" href="/db-tutorial/assets/js/32.2986bb34.js"><link rel="prefetch" href="/db-tutorial/assets/js/33.a9922464.js"><link rel="prefetch" href="/db-tutorial/assets/js/34.4b026973.js"><link rel="prefetch" href="/db-tutorial/assets/js/35.9dd2d462.js"><link rel="prefetch" href="/db-tutorial/assets/js/36.3e51ad0b.js"><link rel="prefetch" href="/db-tutorial/assets/js/37.0c75b4a6.js"><link rel="prefetch" href="/db-tutorial/assets/js/38.53aff2bf.js"><link rel="prefetch" href="/db-tutorial/assets/js/39.b34704c6.js"><link rel="prefetch" href="/db-tutorial/assets/js/40.d2692de9.js"><link rel="prefetch" href="/db-tutorial/assets/js/41.48788a1b.js"><link rel="prefetch" href="/db-tutorial/assets/js/42.4ed55a89.js"><link rel="prefetch" href="/db-tutorial/assets/js/43.bd1a75df.js"><link rel="prefetch" href="/db-tutorial/assets/js/44.331ac972.js"><link rel="prefetch" href="/db-tutorial/assets/js/45.74ff24a0.js"><link rel="prefetch" href="/db-tutorial/assets/js/46.d0d0837c.js"><link rel="prefetch" href="/db-tutorial/assets/js/47.d6b3ff5d.js"><link rel="prefetch" href="/db-tutorial/assets/js/48.08329437.js"><link rel="prefetch" href="/db-tutorial/assets/js/49.8ec348c2.js"><link rel="prefetch" href="/db-tutorial/assets/js/50.fff0c0fc.js"><link rel="prefetch" href="/db-tutorial/assets/js/51.a3a2bf3f.js"><link rel="prefetch" href="/db-tutorial/assets/js/52.1f69c2ef.js"><link rel="prefetch" href="/db-tutorial/assets/js/53.04bf3805.js"><link rel="prefetch" href="/db-tutorial/assets/js/54.c6869df0.js"><link rel="prefetch" href="/db-tutorial/assets/js/55.ad3df06e.js"><link rel="prefetch" href="/db-tutorial/assets/js/56.a8504152.js"><link rel="prefetch" href="/db-tutorial/assets/js/57.14be86b1.js"><link rel="prefetch" href="/db-tutorial/assets/js/58.66724307.js"><link rel="prefetch" href="/db-tutorial/assets/js/59.450b982a.js"><link rel="prefetch" href="/db-tutorial/assets/js/6.50ecdddf.js"><link rel="prefetch" href="/db-tutorial/assets/js/60.4dfd7c6f.js"><link rel="prefetch" href="/db-tutorial/assets/js/61.75308f0a.js"><link rel="prefetch" href="/db-tutorial/assets/js/62.345c0394.js"><link rel="prefetch" href="/db-tutorial/assets/js/63.0070d071.js"><link rel="prefetch" href="/db-tutorial/assets/js/64.3aa1dc66.js"><link rel="prefetch" href="/db-tutorial/assets/js/65.ad503350.js"><link rel="prefetch" href="/db-tutorial/assets/js/66.df8cf248.js"><link rel="prefetch" href="/db-tutorial/assets/js/67.d286b25d.js"><link rel="prefetch" href="/db-tutorial/assets/js/68.f9f672df.js"><link rel="prefetch" href="/db-tutorial/assets/js/69.cdabedef.js"><link rel="prefetch" href="/db-tutorial/assets/js/7.d4495af0.js"><link rel="prefetch" href="/db-tutorial/assets/js/8.96971897.js"><link rel="prefetch" href="/db-tutorial/assets/js/9.2ef68944.js"><link rel="prefetch" href="/db-tutorial/assets/js/vendors~flowchart.36848b96.js"><link rel="prefetch" href="/db-tutorial/assets/js/vendors~notification.5e49bf43.js">
    <link rel="stylesheet" href="/db-tutorial/assets/css/0.styles.23083d05.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/db-tutorial/" class="home-link router-link-active"><img src="images/dunwu-logo-100.png" alt="DB-TUTORIAL" class="logo"> <span class="site-name can-hide">DB-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/db-tutorial/sql/" class="nav-link">
  SQL
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/" class="nav-link router-link-active">
  NOSQL
</a></div><div class="nav-item"><a href="/db-tutorial/sql/mysql/" class="nav-link">
  Mysql
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/redis/" class="nav-link">
  Redis
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/mongodb/" class="nav-link router-link-active">
  MongoDB
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/db-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/db-tutorial/sql/" class="nav-link">
  SQL
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/" class="nav-link router-link-active">
  NOSQL
</a></div><div class="nav-item"><a href="/db-tutorial/sql/mysql/" class="nav-link">
  Mysql
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/redis/" class="nav-link">
  Redis
</a></div><div class="nav-item"><a href="/db-tutorial/nosql/mongodb/" class="nav-link router-link-active">
  MongoDB
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/db-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MongoDB èšåˆæ“ä½œ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/nosql/mongodb/mongodb-aggregation.html#pipeline" class="sidebar-link">Pipeline</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-aggregation.html#pipeline-ç®€ä»‹" class="sidebar-link">Pipeline ç®€ä»‹</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-aggregation.html#pipeline-ä¼˜åŒ–" class="sidebar-link">Pipeline ä¼˜åŒ–</a></li><li class="sidebar-sub-header"><a href="/db-tutorial/nosql/mongodb/mongodb-aggregation.html#pipeline-é™åˆ¶" class="sidebar-link">Pipeline é™åˆ¶</a></li></ul></li><li><a href="/db-tutorial/nosql/mongodb/mongodb-aggregation.html#map-reduce" class="sidebar-link">Map-Reduce</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/db-tutorial/nosql/mongodb/mongodb-aggregation.html#å•ä¸€ç›®çš„èšåˆæ–¹æ³•" class="sidebar-link">å•ä¸€ç›®çš„èšåˆæ–¹æ³•</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/db-tutorial/nosql/mongodb/mongodb-aggregation.html#sql-å’Œ-mongodb-èšåˆå¯¹æ¯”" class="sidebar-link">SQL å’Œ MongoDB èšåˆå¯¹æ¯”</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/db-tutorial/nosql/mongodb/mongodb-aggregation.html#å‚è€ƒèµ„æ–™" class="sidebar-link">å‚è€ƒèµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mongodb-èšåˆæ“ä½œ"><a href="#mongodb-èšåˆæ“ä½œ" class="header-anchor">#</a> MongoDB èšåˆæ“ä½œ</h1> <p>èšåˆæ“ä½œå¤„ç†æ•°æ®è®°å½•å¹¶è¿”å›è®¡ç®—ç»“æœã€‚èšåˆæ“ä½œå°†æ¥è‡ªå¤šä¸ª document çš„å€¼åˆ†ç»„ï¼Œå¹¶å¯ä»¥å¯¹åˆ†ç»„çš„æ•°æ®æ‰§è¡Œå„ç§æ“ä½œä»¥è¿”å›å•ä¸ªç»“æœã€‚ MongoDB æä¾›äº†ä¸‰ç§æ‰§è¡Œèšåˆçš„æ–¹å¼ï¼šèšåˆç®¡é“ï¼Œmap-reduce å‡½æ•°å’Œå•ä¸€ç›®çš„èšåˆæ–¹æ³•ã€‚</p> <h2 id="pipeline"><a href="#pipeline" class="header-anchor">#</a> Pipeline</h2> <h3 id="pipeline-ç®€ä»‹"><a href="#pipeline-ç®€ä»‹" class="header-anchor">#</a> Pipeline ç®€ä»‹</h3> <p>MongoDB çš„èšåˆæ¡†æ¶ä»¥æ•°æ®å¤„ç†ç®¡é“ï¼ˆPipelineï¼‰çš„æ¦‚å¿µä¸ºæ¨¡å‹ã€‚</p> <p><strong>MongoDB é€šè¿‡ <a href="https://docs.mongodb.com/manual/reference/method/db.collection.aggregate/#db.collection.aggregate" target="_blank" rel="noopener noreferrer"><code>db.collection.aggregate()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ–¹æ³•æ”¯æŒèšåˆæ“ä½œ</strong>ã€‚å¹¶æä¾›äº† <a href="https://docs.mongodb.com/manual/reference/command/aggregate/#dbcmd.aggregate" target="_blank" rel="noopener noreferrer"><code>aggregate</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å‘½ä»¤æ¥æ‰§è¡Œ pipelineã€‚</p> <p>MongoDB Pipeline ç”±å¤šä¸ªé˜¶æ®µï¼ˆ<a href="https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/#aggregation-pipeline-operator-reference" target="_blank" rel="noopener noreferrer">stages<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ç»„æˆã€‚æ¯ä¸ªé˜¶æ®µåœ¨ document é€šè¿‡ pipeline æ—¶éƒ½ä¼šå¯¹å…¶è¿›è¡Œè½¬æ¢ã€‚pipeline é˜¶æ®µä¸éœ€è¦ä¸ºæ¯ä¸ªè¾“å…¥ document éƒ½ç”Ÿæˆä¸€ä¸ªè¾“å‡º documentã€‚ä¾‹å¦‚ï¼ŒæŸäº›é˜¶æ®µå¯èƒ½ä¼šç”Ÿæˆæ–° document æˆ–è¿‡æ»¤ documentã€‚</p> <p>åŒä¸€ä¸ªé˜¶æ®µå¯ä»¥åœ¨ pipeline ä¸­å‡ºç°å¤šæ¬¡ï¼Œä½† <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/out/#pipe._S_out" target="_blank" rel="noopener noreferrer"><code>$out</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€<a href="https://docs.mongodb.com/manual/reference/operator/aggregation/merge/#pipe._S_merge" target="_blank" rel="noopener noreferrer"><code>$merge</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,å’Œ <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/geoNear/#pipe._S_geoNear" target="_blank" rel="noopener noreferrer"><code>$geoNear</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µé™¤å¤–ã€‚æ‰€æœ‰å¯ç”¨ pipeline é˜¶æ®µå¯ä»¥å‚è€ƒï¼š<a href="https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/#aggregation-pipeline-operator-reference" target="_blank" rel="noopener noreferrer">Aggregation Pipeline Stages<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <p><img src="http://dunwu.test.upcdn.net/snap/20200921092725.png" alt="img"></p> <ul><li>ç¬¬ä¸€é˜¶æ®µï¼š<a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><code>$match</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µæŒ‰çŠ¶æ€å­—æ®µè¿‡æ»¤ documentï¼Œç„¶åå°†çŠ¶æ€ç­‰äºâ€œ Aâ€çš„é‚£äº› document ä¼ é€’åˆ°ä¸‹ä¸€é˜¶æ®µã€‚</li> <li>ç¬¬äºŒé˜¶æ®µï¼š<a href="https://docs.mongodb.com/manual/reference/operator/aggregation/group/#pipe._S_group" target="_blank" rel="noopener noreferrer"><code>$group</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µæŒ‰ cust_id å­—æ®µå¯¹ document è¿›è¡Œåˆ†ç»„ï¼Œä»¥è®¡ç®—æ¯ä¸ªå”¯ä¸€ cust_id çš„é‡‘é¢æ€»å’Œã€‚</li></ul> <p>æœ€åŸºæœ¬çš„ç®¡é“é˜¶æ®µæä¾›è¿‡æ»¤å™¨ï¼Œå…¶æ“ä½œç±»ä¼¼äºæŸ¥è¯¢å’Œ document è½¬æ¢ï¼ˆä¿®æ”¹è¾“å‡º document å½¢å¼ï¼‰ã€‚</p> <p>å…¶ä»–ç®¡é“æ“ä½œæä¾›äº†ç”¨äºæŒ‰ç‰¹å®šå­—æ®µå¯¹ document è¿›è¡Œåˆ†ç»„å’Œæ’åºçš„å·¥å…·ï¼Œä»¥åŠç”¨äºæ±‡æ€»æ•°ç»„ï¼ˆåŒ…æ‹¬ document æ•°ç»„ï¼‰å†…å®¹çš„å·¥å…·ã€‚å¦å¤–ï¼Œç®¡é“é˜¶æ®µå¯ä»¥å°†è¿ç®—ç¬¦ç”¨äºè¯¸å¦‚è®¡ç®—å¹³å‡å€¼æˆ–è¿æ¥å­—ç¬¦ä¸²ä¹‹ç±»çš„ä»»åŠ¡ã€‚</p> <p>èšåˆç®¡é“ä¹Ÿå¯ä»¥åœ¨åˆ†ç‰‡ collection ä¸Šæ“ä½œã€‚</p> <h3 id="pipeline-ä¼˜åŒ–"><a href="#pipeline-ä¼˜åŒ–" class="header-anchor">#</a> Pipeline ä¼˜åŒ–</h3> <h4 id="æŠ•å½±ä¼˜åŒ–"><a href="#æŠ•å½±ä¼˜åŒ–" class="header-anchor">#</a> æŠ•å½±ä¼˜åŒ–</h4> <p>Pipeline å¯ä»¥ç¡®å®šæ˜¯å¦ä»…éœ€è¦ document ä¸­å¿…å¡«å­—æ®µå³å¯è·å¾—ç»“æœã€‚</p> <h4 id="pipeline-ä¸²è¡Œä¼˜åŒ–"><a href="#pipeline-ä¸²è¡Œä¼˜åŒ–" class="header-anchor">#</a> Pipeline ä¸²è¡Œä¼˜åŒ–</h4> <p>ï¼ˆ<code>$project</code>ã€<code>$unset</code>ã€<code>$addFields</code>ã€<code>$set</code>ï¼‰ + <code>$match</code> ä¸²è¡Œä¼˜åŒ–</p> <p>å¯¹äºåŒ…å«æŠ•å½±é˜¶æ®µï¼ˆ<a href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/#pipe._S_project" target="_blank" rel="noopener noreferrer"><code>$project</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æˆ– <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/unset/#pipe._S_unset" target="_blank" rel="noopener noreferrer"><code>$unset</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æˆ– <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/addFields/#pipe._S_addFields" target="_blank" rel="noopener noreferrer"><code>$addFields</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æˆ– <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/set/#pipe._S_set" target="_blank" rel="noopener noreferrer"><code>$set</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ï¼Œä¸”åç»­è·Ÿéšç€ <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><code>$match</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µçš„ Pipeline ï¼ŒMongoDB ä¼šå°†æ‰€æœ‰ <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><code>$match</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µä¸­ä¸éœ€è¦åœ¨æŠ•å½±é˜¶æ®µä¸­è®¡ç®—å‡ºçš„å€¼çš„è¿‡æ»¤å™¨ï¼Œç§»åŠ¨ä¸€ä¸ªåœ¨æŠ•å½±é˜¶æ®µä¹‹å‰çš„æ–° <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><code>$match</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µã€‚</p> <p>å¦‚æœ Pipeline åŒ…å«å¤šä¸ªæŠ•å½±é˜¶æ®µ å’Œ / æˆ– <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><code>$match</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µï¼Œåˆ™ MongoDB å°†ä¸ºæ¯ä¸ª <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><code>$match</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µæ‰§è¡Œæ­¤ä¼˜åŒ–ï¼Œå°†æ¯ä¸ª <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><code>$match</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¿‡æ»¤å™¨ç§»åŠ¨åˆ°è¯¥è¿‡æ»¤å™¨ä¸ä¾èµ–çš„æ‰€æœ‰æŠ•å½±é˜¶æ®µä¹‹å‰ã€‚</p> <p>ã€ç¤ºä¾‹ã€‘Pipeline ä¸²è¡Œä¼˜åŒ–ç¤ºä¾‹</p> <p>ä¼˜åŒ–å‰ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> $addFields<span class="token operator">:</span> <span class="token punctuation">{</span>
    maxTime<span class="token operator">:</span> <span class="token punctuation">{</span> $max<span class="token operator">:</span> <span class="token string">&quot;$times&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    minTime<span class="token operator">:</span> <span class="token punctuation">{</span> $min<span class="token operator">:</span> <span class="token string">&quot;$times&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> $project<span class="token operator">:</span> <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> times<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> maxTime<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> minTime<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    avgTime<span class="token operator">:</span> <span class="token punctuation">{</span> $avg<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;$maxTime&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;$minTime&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> $match<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Joe Schmoe&quot;</span><span class="token punctuation">,</span>
    maxTime<span class="token operator">:</span> <span class="token punctuation">{</span> $lt<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    minTime<span class="token operator">:</span> <span class="token punctuation">{</span> $gt<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    avgTime<span class="token operator">:</span> <span class="token punctuation">{</span> $gt<span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre></div><p>ä¼˜åŒ–åï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> $match<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Joe Schmoe&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> $addFields<span class="token operator">:</span> <span class="token punctuation">{</span>
    maxTime<span class="token operator">:</span> <span class="token punctuation">{</span> $max<span class="token operator">:</span> <span class="token string">&quot;$times&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    minTime<span class="token operator">:</span> <span class="token punctuation">{</span> $min<span class="token operator">:</span> <span class="token string">&quot;$times&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> $match<span class="token operator">:</span> <span class="token punctuation">{</span> maxTime<span class="token operator">:</span> <span class="token punctuation">{</span> $lt<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> minTime<span class="token operator">:</span> <span class="token punctuation">{</span> $gt<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> $project<span class="token operator">:</span> <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> times<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> maxTime<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> minTime<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    avgTime<span class="token operator">:</span> <span class="token punctuation">{</span> $avg<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;$maxTime&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;$minTime&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> $match<span class="token operator">:</span> <span class="token punctuation">{</span> avgTime<span class="token operator">:</span> <span class="token punctuation">{</span> $gt<span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre></div><p>è¯´æ˜ï¼š</p> <p><code>{ name: &quot;Joe Schmoe&quot; }</code> ä¸éœ€è¦è®¡ç®—ä»»ä½•æŠ•å½±é˜¶æ®µçš„å€¼ï¼Œæ‰€ä»¥å¯ä»¥æ”¾åœ¨æœ€å‰é¢ã€‚</p> <p><code>{ avgTime: { $gt: 7 } }</code> ä¾èµ– <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/#pipe._S_project" target="_blank" rel="noopener noreferrer"><code>$project</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µçš„ <code>avgTime</code> å­—æ®µï¼Œæ‰€ä»¥ä¸èƒ½ç§»åŠ¨ã€‚</p> <p><code>maxTime</code> å’Œ <code>minTime</code> å­—æ®µè¢« <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/addFields/#pipe._S_addFields" target="_blank" rel="noopener noreferrer"><code>$addFields</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µæ‰€ä¾èµ–ï¼Œä½†è‡ªèº«ä¸ä¾èµ–å…¶ä»–ï¼Œæ‰€ä»¥ä¼šæ–°å»ºä¸€ä¸ª <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><code>$match</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µï¼Œå¹¶å°†å…¶ç½®äº <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/#pipe._S_project" target="_blank" rel="noopener noreferrer"><code>$project</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µä¹‹å‰ã€‚</p> <h4 id="pipeline-å¹¶è¡Œä¼˜åŒ–"><a href="#pipeline-å¹¶è¡Œä¼˜åŒ–" class="header-anchor">#</a> Pipeline å¹¶è¡Œä¼˜åŒ–</h4> <p>å¦‚æœå¯èƒ½ï¼Œä¼˜åŒ–é˜¶æ®µä¼šå°† Pipeline é˜¶æ®µåˆå¹¶åˆ°å…¶å‰èº«ã€‚é€šå¸¸ï¼Œåˆå¹¶å‘ç”Ÿåœ¨ä»»æ„åºåˆ—é‡æ–°æ’åºä¼˜åŒ–ä¹‹åã€‚</p> <h5 id="sort-limit"><a href="#sort-limit" class="header-anchor">#</a> <code>$sort</code> + <code>$limit</code></h5> <p>å½“ <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sort/#pipe._S_sort" target="_blank" rel="noopener noreferrer"><code>$sort</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åœ¨ <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit" target="_blank" rel="noopener noreferrer"><code>$limit</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä¹‹å‰æ—¶ï¼Œå¦‚æœæ²¡æœ‰ä¸­é—´é˜¶æ®µä¿®æ”¹æ–‡æ¡£æ•°é‡ï¼ˆä¾‹å¦‚ <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/#pipe._S_unwind" target="_blank" rel="noopener noreferrer"><code>$unwind</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€<a href="https://docs.mongodb.com/manual/reference/operator/aggregation/group/#pipe._S_group" target="_blank" rel="noopener noreferrer"><code>$group</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼‰ï¼Œåˆ™ä¼˜åŒ–ç¨‹åºå¯ä»¥å°† <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit" target="_blank" rel="noopener noreferrer"><code>$limit</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åˆå¹¶åˆ° <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sort/#pipe._S_sort" target="_blank" rel="noopener noreferrer"><code>$sort</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä¸­ã€‚å¦‚æœæœ‰ç®¡é“é˜¶æ®µæ›´æ”¹äº† <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sort/#pipe._S_sort" target="_blank" rel="noopener noreferrer"><code>$sort</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å’Œ <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit" target="_blank" rel="noopener noreferrer"><code>$limit</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µä¹‹é—´çš„æ–‡æ¡£æ•°ï¼Œåˆ™ MongoDB ä¸ä¼šå°† <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit" target="_blank" rel="noopener noreferrer"><code>$limit</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åˆå¹¶åˆ° <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sort/#pipe._S_sort" target="_blank" rel="noopener noreferrer"><code>$sort</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä¸­ã€‚</p> <p>ã€ç¤ºä¾‹ã€‘<code>$sort</code> + <code>$limit</code></p> <p>ä¼˜åŒ–å‰ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> $sort <span class="token operator">:</span> <span class="token punctuation">{</span> age <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> $project <span class="token operator">:</span> <span class="token punctuation">{</span> age <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> status <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> $limit<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span>
</code></pre></div><p>ä¼˜åŒ–åï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;$sort&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token string">&quot;sortKey&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token string">&quot;limit&quot;</span> <span class="token operator">:</span> <span class="token function">NumberLong</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> <span class="token string">&quot;$project&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token string">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
         <span class="token string">&quot;status&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
         <span class="token string">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="limit-limit"><a href="#limit-limit" class="header-anchor">#</a> <code>$limit</code> + <code>$limit</code></h5> <p>å¦‚æœä¸€ä¸ª <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit" target="_blank" rel="noopener noreferrer"><code>$limit</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ç´§éšå¦ä¸€ä¸ª <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit" target="_blank" rel="noopener noreferrer"><code>$limit</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œé‚£ä¹ˆå®ƒä»¬å¯ä»¥åˆå¹¶ä¸ºä¸€ã€‚</p> <p>ä¼˜åŒ–å‰ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> $limit<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> $limit<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
</code></pre></div><p>ä¼˜åŒ–åï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  $limit<span class="token operator">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="skip-skip"><a href="#skip-skip" class="header-anchor">#</a> <code>$skip</code> + <code>$skip</code></h5> <p>å¦‚æœä¸€ä¸ª <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/skip/#pipe._S_skip" target="_blank" rel="noopener noreferrer"><code>$skip</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ç´§éšå¦ä¸€ä¸ª <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/skip/#pipe._S_skip" target="_blank" rel="noopener noreferrer"><code>$skip</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼Œé‚£ä¹ˆå®ƒä»¬å¯ä»¥åˆå¹¶ä¸ºä¸€ã€‚</p> <p>ä¼˜åŒ–å‰ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> $skip<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> $skip<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
</code></pre></div><p>ä¼˜åŒ–åï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  $skip<span class="token operator">:</span> <span class="token number">7</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="match-match"><a href="#match-match" class="header-anchor">#</a> <code>$match</code> + <code>$match</code></h5> <p>å¦‚æœä¸€ä¸ª <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/skip/#pipe._S_skip" target="_blank" rel="noopener noreferrer"><code>$skip</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ç´§éšå¦ä¸€ä¸ª <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/skip/#pipe._S_skip" target="_blank" rel="noopener noreferrer"><code>$skip</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼Œé‚£ä¹ˆå®ƒä»¬å¯ä»¥é€šè¿‡ <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/and/#exp._S_and" target="_blank" rel="noopener noreferrer"><code>$and</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åˆå¹¶ä¸ºä¸€ã€‚</p> <p>ä¼˜åŒ–å‰ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> $match<span class="token operator">:</span> <span class="token punctuation">{</span> year<span class="token operator">:</span> <span class="token number">2014</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> $match<span class="token operator">:</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">&quot;A&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre></div><p>ä¼˜åŒ–åï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  $match<span class="token operator">:</span> <span class="token punctuation">{</span>
    $and<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> year<span class="token operator">:</span> <span class="token number">2014</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'A'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="lookup-unwind"><a href="#lookup-unwind" class="header-anchor">#</a> <code>$lookup</code> + <code>$unwind</code></h5> <p>å¦‚æœä¸€ä¸ª <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/#pipe._S_unwind" target="_blank" rel="noopener noreferrer"><code>$unwind</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ç´§éšå¦ä¸€ä¸ª <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup" target="_blank" rel="noopener noreferrer"><code>$lookup</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œå¹¶ä¸” <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/#pipe._S_unwind" target="_blank" rel="noopener noreferrer"><code>$unwind</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åœ¨ <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup" target="_blank" rel="noopener noreferrer"><code>$lookup</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> çš„ as å­—æ®µä¸Šè¿è¡Œæ—¶ï¼Œä¼˜åŒ–ç¨‹åºå¯ä»¥å°† <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/#pipe._S_unwind" target="_blank" rel="noopener noreferrer"><code>$unwind</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> åˆå¹¶åˆ° <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup" target="_blank" rel="noopener noreferrer"><code>$lookup</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é˜¶æ®µã€‚è¿™æ ·å¯ä»¥é¿å…åˆ›å»ºè¾ƒå¤§çš„ä¸­é—´æ–‡æ¡£ã€‚</p> <p>ä¼˜åŒ–å‰ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  $lookup<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&quot;otherCollection&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">as</span><span class="token operator">:</span> <span class="token string">&quot;resultingArray&quot;</span><span class="token punctuation">,</span>
    localField<span class="token operator">:</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span>
    foreignField<span class="token operator">:</span> <span class="token string">&quot;y&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> $unwind<span class="token operator">:</span> <span class="token string">&quot;$resultingArray&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>ä¼˜åŒ–åï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  $lookup<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&quot;otherCollection&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">as</span><span class="token operator">:</span> <span class="token string">&quot;resultingArray&quot;</span><span class="token punctuation">,</span>
    localField<span class="token operator">:</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span>
    foreignField<span class="token operator">:</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span>
    unwinding<span class="token operator">:</span> <span class="token punctuation">{</span> preserveNullAndEmptyArrays<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="pipeline-é™åˆ¶"><a href="#pipeline-é™åˆ¶" class="header-anchor">#</a> Pipeline é™åˆ¶</h3> <p>ç»“æœé›†ä¸­çš„æ¯ä¸ªæ–‡æ¡£å‡å— BSON æ–‡æ¡£å¤§å°é™åˆ¶ï¼ˆå½“å‰ä¸º 16 MBï¼‰</p> <p>Pipeline çš„å†…å­˜é™åˆ¶ä¸º 100 MBã€‚</p> <h2 id="map-reduce"><a href="#map-reduce" class="header-anchor">#</a> Map-Reduce</h2> <blockquote><p>èšåˆ pipeline æ¯” map-reduce æä¾›æ›´å¥½çš„æ€§èƒ½å’Œæ›´ä¸€è‡´çš„æ¥å£ã€‚</p></blockquote> <p>Map-reduce æ˜¯ä¸€ç§æ•°æ®å¤„ç†èŒƒå¼ï¼Œç”¨äºå°†å¤§é‡æ•°æ®æ±‡æ€»ä¸ºæœ‰ç”¨çš„èšåˆç»“æœã€‚ä¸ºäº†æ‰§è¡Œ map-reduce æ“ä½œï¼ŒMongoDB æä¾›äº† <a href="https://docs.mongodb.com/manual/reference/command/mapReduce/#dbcmd.mapReduce" target="_blank" rel="noopener noreferrer"><code>mapReduce</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ•°æ®åº“å‘½ä»¤ã€‚</p> <p><img src="http://dunwu.test.upcdn.net/snap/20200921155546.svg" alt="img"></p> <p>åœ¨ä¸Šé¢çš„æ“ä½œä¸­ï¼ŒMongoDB å°† map é˜¶æ®µåº”ç”¨äºæ¯ä¸ªè¾“å…¥ documentï¼ˆå³ collection ä¸­ä¸æŸ¥è¯¢æ¡ä»¶åŒ¹é…çš„ documentï¼‰ã€‚ map å‡½æ•°åˆ†å‘å‡ºå¤šä¸ªé”®-å€¼å¯¹ã€‚å¯¹äºå…·æœ‰å¤šä¸ªå€¼çš„é‚£äº›é”®ï¼ŒMongoDB åº”ç”¨ reduce é˜¶æ®µï¼Œè¯¥é˜¶æ®µæ”¶é›†å¹¶æ±‡æ€»èšåˆçš„æ•°æ®ã€‚ç„¶åï¼ŒMongoDB å°†ç»“æœå­˜å‚¨åœ¨ collection ä¸­ã€‚å¯é€‰åœ°ï¼Œreduce å‡½æ•°çš„è¾“å‡ºå¯ä»¥é€šè¿‡ finalize å‡½æ•°æ¥è¿›ä¸€æ­¥æ±‡æ€»èšåˆç»“æœã€‚</p> <p>MongoDB ä¸­çš„æ‰€æœ‰ map-reduce å‡½æ•°éƒ½æ˜¯ JavaScriptï¼Œå¹¶åœ¨ mongod è¿›ç¨‹ä¸­è¿è¡Œã€‚ Map-reduce æ“ä½œå°†å•ä¸ª collection çš„ document ä½œä¸ºè¾“å…¥ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å¼€å§‹ map é˜¶æ®µä¹‹å‰æ‰§è¡Œä»»æ„æ’åºå’Œé™åˆ¶ã€‚ mapReduce å¯ä»¥å°† map-reduce æ“ä½œçš„ç»“æœä½œä¸º document è¿”å›ï¼Œä¹Ÿå¯ä»¥å°†ç»“æœå†™å…¥ collectionã€‚</p> <h2 id="å•ä¸€ç›®çš„èšåˆæ–¹æ³•"><a href="#å•ä¸€ç›®çš„èšåˆæ–¹æ³•" class="header-anchor">#</a> å•ä¸€ç›®çš„èšåˆæ–¹æ³•</h2> <p>MongoDB æ”¯æŒä¸€ä¸‹å•ä¸€ç›®çš„çš„èšåˆæ“ä½œï¼š</p> <ul><li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.estimatedDocumentCount/#db.collection.estimatedDocumentCount" target="_blank" rel="noopener noreferrer"><code>db.collection.estimatedDocumentCount()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.count/#db.collection.count" target="_blank" rel="noopener noreferrer"><code>db.collection.count()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.mongodb.com/manual/reference/method/db.collection.distinct/#db.collection.distinct" target="_blank" rel="noopener noreferrer"><code>db.collection.distinct()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>æ‰€æœ‰è¿™äº›æ“ä½œéƒ½æ±‡æ€»äº†å•ä¸ª collection ä¸­çš„ documentã€‚å°½ç®¡è¿™äº›æ“ä½œæä¾›äº†å¯¹å¸¸è§èšåˆè¿‡ç¨‹çš„ç®€å•è®¿é—®ï¼Œä½†æ˜¯å®ƒä»¬ç›¸æ¯”èšåˆ pipeline å’Œ map-reduceï¼Œç¼ºå°‘çµæ´»æ€§å’Œä¸°å¯Œçš„åŠŸèƒ½æ€§ã€‚</p> <p><img src="http://dunwu.test.upcdn.net/snap/20200921155935.svg" alt="img"></p> <h2 id="sql-å’Œ-mongodb-èšåˆå¯¹æ¯”"><a href="#sql-å’Œ-mongodb-èšåˆå¯¹æ¯”" class="header-anchor">#</a> SQL å’Œ MongoDB èšåˆå¯¹æ¯”</h2> <p>MongoDB pipeline æä¾›äº†è®¸å¤šç­‰ä»·äº SQL ä¸­å¸¸è§èšåˆè¯­å¥çš„æ“ä½œã€‚</p> <p>ä¸‹è¡¨æ¦‚è¿°äº†å¸¸è§çš„ SQL èšåˆè¯­å¥æˆ–å‡½æ•°å’Œ MongoDB èšåˆæ“ä½œçš„æ˜ å°„è¡¨ï¼š</p> <table><thead><tr><th style="text-align:left;">SQL Terms, Functions, and Concepts</th> <th style="text-align:left;">MongoDB Aggregation Operators</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>WHERE</code></td> <td style="text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><code>$match</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>GROUP BY</code></td> <td style="text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/group/#pipe._S_group" target="_blank" rel="noopener noreferrer"><code>$group</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>HAVING</code></td> <td style="text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match" target="_blank" rel="noopener noreferrer"><code>$match</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>SELECT</code></td> <td style="text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/project/#pipe._S_project" target="_blank" rel="noopener noreferrer"><code>$project</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>ORDER BY</code></td> <td style="text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sort/#pipe._S_sort" target="_blank" rel="noopener noreferrer"><code>$sort</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>LIMIT</code></td> <td style="text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit" target="_blank" rel="noopener noreferrer"><code>$limit</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>SUM()</code></td> <td style="text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sum/#grp._S_sum" target="_blank" rel="noopener noreferrer"><code>$sum</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>COUNT()</code></td> <td style="text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sum/#grp._S_sum" target="_blank" rel="noopener noreferrer"><code>$sum</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/sortByCount/#pipe._S_sortByCount" target="_blank" rel="noopener noreferrer"><code>$sortByCount</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>JOIN</code></td> <td style="text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup" target="_blank" rel="noopener noreferrer"><code>$lookup</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>SELECT INTO NEW_TABLE</code></td> <td style="text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/out/#pipe._S_out" target="_blank" rel="noopener noreferrer"><code>$out</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td style="text-align:left;"><code>MERGE INTO TABLE</code></td> <td style="text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/merge/#pipe._S_merge" target="_blank" rel="noopener noreferrer"><code>$merge</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (Available starting in MongoDB 4.2)</td></tr> <tr><td style="text-align:left;"><code>UNION ALL</code></td> <td style="text-align:left;"><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/unionWith/#pipe._S_unionWith" target="_blank" rel="noopener noreferrer"><code>$unionWith</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (Available starting in MongoDB 4.4)</td></tr></tbody></table> <p>ã€ç¤ºä¾‹ã€‘</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>orders<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    cust_id<span class="token operator">:</span> <span class="token string">'Ant O. Knee'</span><span class="token punctuation">,</span>
    ord_date<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-03-01'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price<span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    items<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'oranges'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'apples'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    cust_id<span class="token operator">:</span> <span class="token string">'Ant O. Knee'</span><span class="token punctuation">,</span>
    ord_date<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-03-08'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price<span class="token operator">:</span> <span class="token number">70</span><span class="token punctuation">,</span>
    items<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'oranges'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'chocolates'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    cust_id<span class="token operator">:</span> <span class="token string">'Busby Bee'</span><span class="token punctuation">,</span>
    ord_date<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-03-08'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
    items<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'oranges'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'pears'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    cust_id<span class="token operator">:</span> <span class="token string">'Busby Bee'</span><span class="token punctuation">,</span>
    ord_date<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-03-18'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price<span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'oranges'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    cust_id<span class="token operator">:</span> <span class="token string">'Busby Bee'</span><span class="token punctuation">,</span>
    ord_date<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-03-19'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
    items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'chocolates'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
    cust_id<span class="token operator">:</span> <span class="token string">'Cam Elot'</span><span class="token punctuation">,</span>
    ord_date<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-03-19'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price<span class="token operator">:</span> <span class="token number">35</span><span class="token punctuation">,</span>
    items<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'carrots'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">1.0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'apples'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
    cust_id<span class="token operator">:</span> <span class="token string">'Cam Elot'</span><span class="token punctuation">,</span>
    ord_date<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-03-20'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price<span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'oranges'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    cust_id<span class="token operator">:</span> <span class="token string">'Don Quis'</span><span class="token punctuation">,</span>
    ord_date<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-03-20'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price<span class="token operator">:</span> <span class="token number">75</span><span class="token punctuation">,</span>
    items<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'chocolates'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'apples'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
    cust_id<span class="token operator">:</span> <span class="token string">'Don Quis'</span><span class="token punctuation">,</span>
    ord_date<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-03-20'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price<span class="token operator">:</span> <span class="token number">55</span><span class="token punctuation">,</span>
    items<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'carrots'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">1.0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'apples'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'oranges'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    _id<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    cust_id<span class="token operator">:</span> <span class="token string">'Don Quis'</span><span class="token punctuation">,</span>
    ord_date<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-03-23'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price<span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> sku<span class="token operator">:</span> <span class="token string">'oranges'</span><span class="token punctuation">,</span> qty<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> price<span class="token operator">:</span> <span class="token number">2.5</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    status<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>SQL å’Œ MongoDB èšåˆæ–¹å¼å¯¹æ¯”ï¼š</p> <p><img src="http://dunwu.test.upcdn.net/snap/20200921200556.png" alt="img"></p> <h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="header-anchor">#</a> å‚è€ƒèµ„æ–™</h2> <ul><li><strong>å®˜æ–¹</strong> <ul><li><a href="https://www.mongodb.com/" target="_blank" rel="noopener noreferrer">MongoDB å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/mongodb/mongo" target="_blank" rel="noopener noreferrer">MongoDB Github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://university.mongodb.com/" target="_blank" rel="noopener noreferrer">MongoDB å®˜æ–¹å…è´¹æ•™ç¨‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><strong>æ•™ç¨‹</strong> <ul><li><a href="https://www.runoob.com/mongodb/mongodb-tutorial.html" target="_blank" rel="noopener noreferrer">MongoDB æ•™ç¨‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://time.geekbang.org/course/intro/100040001" target="_blank" rel="noopener noreferrer">MongoDB é«˜æ‰‹è¯¾<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/db-tutorial/edit/master/docs/nosql/mongodb/mongodb-aggregation.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/db-tutorial/assets/js/app.79266cfb.js" defer></script><script src="/db-tutorial/assets/js/4.26b0a8d7.js" defer></script><script src="/db-tutorial/assets/js/30.23b2927a.js" defer></script><script src="/db-tutorial/assets/js/5.1e6b02f3.js" defer></script>
  </body>
</html>
